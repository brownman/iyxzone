<% content_for :javascript_include do %>
  <%= javascript_include_merged :share %>
<% end %>

<div id="canvas" class="round_r_t"><div class="round_l_t"><div class="round_r_b"><div class="round_l_b">
  <div class="round_m"><div class="round_body">
	<% if @user==current_user %>
    <h1 class="app-share">分享</h1>
	<% else %>
    <div class="friend-head space s_clear">
      <span class="left"><%= avatar @user, :class=>"imgbox01"%></span>
      <p class="left">
        <strong><%= @user.login %>的分享</strong><br />
        <%= link_to '个人主页', profile_url(@user.profile), :class=>'red'%>
      </p>
    </div>
	<% end %>
    <%= render :partial => 'new_link_sharing' %>
    <div class="box02 canvas_int rows">
      <div class="tab tab01">
      <% if @user == current_user %>
        <%= render :partial => 'share_button' %>
      <% end %>
        <ul>
          <% subject = get_subject @user %>
          <li><span><%= link_to "热门分享", hot_shares_url %></span></li>
          <li><span><%= link_to "最新创建", recent_shares_url %></span></li>
          <li class='hover'><span><%= link_to "#{subject}的分享", shares_url(:uid => @user.id) %></span></li>
					<% if @user == current_user %>
          <li><span><%= link_to "好友的分享", friends_shares_url(:type => 0) %></span></li>
					<% end %>
        </ul>
      </div>
      <div class="feed-box01">
        <div class="nav-link">
          <ul class="s_clear">
            <% if params[:type].to_i == 0 %>
              <li class="hover"><%= link_to "<span>全部</span>", shares_url(:uid => @user.id, :type => 0) %></li>
            <% else %>
              <li><%= link_to "<span>全部</span>", shares_url(:uid => @user.id, :type => 0) %></li>
            <% end %>
            <% if params[:type].to_i == 1 %>
              <li class="hover"><%= link_to "<span>日志</span>", shares_url(:uid => @user.id, :type => 1) %></li>
            <% else %>
              <li><%= link_to "<span>日志</span>", shares_url(:uid => @user.id, :type => 1) %></li>
            <% end %>
            <% if params[:type].to_i == 2 %>
              <li class="hover"><%= link_to "<span>视频</span>", shares_url(:uid => @user.id, :type => 2) %></li>
            <% else %>
              <li><%= link_to "<span>视频</span>", shares_url(:uid => @user.id, :type => 2) %></li>
            <% end %>
            <% if params[:type].to_i == 3 %>
              <li class="hover"><%= link_to "<span>连接</span>", shares_url(:uid => @user.id, :type => 3) %></li>
            <% else %>
              <li><%= link_to "<span>连接</span>", shares_url(:uid => @user.id, :type => 3) %></li>
            <% end %>
            <% if params[:type].to_i == 4 %>
              <li class="hover"><%= link_to "<span>照片</span>", shares_url(:uid => @user.id, :type => 4) %></li>
            <% else %>
              <li><%= link_to "<span>照片</span>", shares_url(:uid => @user.id, :type => 4) %></li>
            <% end %>
            <% if params[:type].to_i == 5 %>
              <li class="hover"><%= link_to "<span>相册</span>", shares_url(:uid => @user.id, :type => 5) %></li>
            <% else %>
              <li><%= link_to "<span>相册</span>", shares_url(:uid => @user.id, :type => 5) %></li>
            <% end %>
            <% if params[:type].to_i == 6 %>
              <li class="hover"><%= link_to "<span>投票</span>", shares_url(:uid => @user.id, :type => 6) %></li>
            <% else %>
              <li><%= link_to "<span>投票</span>", shares_url(:uid => @user.id, :type => 6) %></li>
            <% end %>
            <% if params[:type].to_i == 7 %>
              <li class="hover"><%= link_to "<span>游戏</span>", shares_url(:uid => @user.id, :type => 7) %></li>
            <% else %>
              <li><%= link_to "<span>游戏</span>", shares_url(:uid => @user.id, :type => 7) %></li>
            <% end %>
            <% if params[:type].to_i == 8 %>
              <li class="hover"><%= link_to "<span>玩家</span>", shares_url(:uid => @user.id, :type => 8) %></li>
            <% else %>
              <li><%= link_to "<span>玩家</span>", shares_url(:uid => @user.id, :type => 8) %></li>
            <% end %>
            <% if params[:type].to_i == 9 %>
              <li class="hover"><%= link_to "<span>话题</span>", shares_url(:uid => @user.id, :type => 9) %></li>
            <% else %>
              <li><%= link_to "<span>话题</span>", shares_url(:uid => @user.id, :type => 9) %></li>
            <% end %>
          </ul>
        </div>
        <div class="feed-img-list rows">
        <% if @shares.total_entries != 0 %>
          <% @shares.each do |share| %>
            <%= render :partial => "#{share.shareable_type.underscore}_share", :locals => {:share => share, :sharing => share.sharings.first(:conditions => {:poster_id => @user.id})} %>
          <% end %>
          <%= will_paginate @shares %>
        <% else %>
          <% if @user == current_user %>
            <div class='tip'>你啥都没分享，怎么能这样呢？！</div>
          <% else %>
            <div class='tip'><%= get_subject @user %>都没分享，真是一个没情趣的人 </div>
          <% end %>
        <% end %>
        </div>
      </div>
    </div>
  </div></div>
</div></div></div></div>
